# =============================================================================
# AIChatDesk Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# Never commit .env to version control

# =============================================================================
# 1. SERVER CONFIGURATION
# =============================================================================

# Server port (standalone Express + WebSocket server)
AICHATDESK_PORT=8001

# CORS origin (comma-separated for multiple origins)
# Example: http://localhost:3000,https://myapp.com
# WARNING: Do NOT use wildcard (*) in production
AICHATDESK_CORS_ORIGIN=http://localhost:3000

# Node environment (development, production, test)
NODE_ENV=development

# =============================================================================
# 2. DATABASE
# =============================================================================

# MongoDB connection string
# The server uses the host app's MongoDB instance with aichatdesk_ prefix on all collections
# Format: mongodb://localhost:27017/myapp
# Or MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/myapp
MONGODB_URI=mongodb://localhost:27017/myapp

# =============================================================================
# 3. AI CONFIGURATION
# =============================================================================

# Anthropic Claude API key
# Get from: https://console.anthropic.com/settings/keys
# Used for: AI responses, conversation handling, agent copilot
CLAUDE_API_KEY=sk-ant-api03-...

# AI model to use
# Options: claude-3-5-sonnet-20241022 (recommended), claude-3-opus-20240229, claude-3-haiku-20240307
CLAUDE_MODEL=claude-3-5-sonnet-20241022

# AI confidence threshold (0.0-1.0)
# Below this value, the AI will escalate to a human agent
# Recommended: 0.7 (higher = more conservative, lower = more autonomous)
CLAUDE_CONFIDENCE_THRESHOLD=0.7

# Max tokens for AI responses
# Higher = longer responses but higher cost
# Recommended: 1024 for support responses
CLAUDE_MAX_TOKENS=1024

# =============================================================================
# 4. VECTOR EMBEDDINGS (for RAG)
# =============================================================================

# OpenAI API key for text-embedding-3-small model
# Get from: https://platform.openai.com/api-keys
# Used for: Vector embeddings, semantic search on knowledge base
OPENAI_API_KEY=sk-...

# Embedding model
# Recommended: text-embedding-3-small (best cost/performance for RAG)
# Alternative: text-embedding-3-large (higher quality, higher cost)
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Embedding dimensions
# 1536 for text-embedding-3-small
# 3072 for text-embedding-3-large
EMBEDDING_DIMENSIONS=1536

# =============================================================================
# 5. EMAIL NOTIFICATIONS (SendGrid)
# =============================================================================

# SendGrid API key
# Get from: https://app.sendgrid.com/settings/api_keys
# Free tier: 100 emails/day
# Used for: New chat notifications, chat transcripts
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxx

# Email addresses
# From email must be verified in SendGrid
SENDGRID_FROM_EMAIL=noreply@myapp.com
SENDGRID_FROM_NAME=MyApp Support

# Email address to receive new chat notifications
SENDGRID_TO_EMAIL=support@myapp.com

# =============================================================================
# 6. FILE UPLOADS
# =============================================================================

# Max file size in bytes
# Default: 10MB (10485760 bytes)
# Increase for larger attachments (e.g., 20MB = 20971520)
MAX_FILE_SIZE=10485760

# Allowed file extensions (comma-separated, no dots)
# Common: png,jpg,jpeg,gif,pdf,txt,log,zip,doc,docx
ALLOWED_FILE_EXTENSIONS=png,jpg,jpeg,gif,pdf,txt,log,zip,doc,docx

# =============================================================================
# 7. RATE LIMITING
# =============================================================================

# Max requests per IP per window
# Adjust based on expected traffic:
# - Small site: 50-100
# - Medium traffic: 200-300
# - High traffic: 500+
RATE_LIMIT_MAX_REQUESTS=100

# Rate limit window in milliseconds
# Default: 900000ms = 15 minutes
# Alternative: 3600000ms = 1 hour
RATE_LIMIT_WINDOW_MS=900000

# =============================================================================
# 8. AGENT DASHBOARD AUTHENTICATION
# =============================================================================

# JWT secret for agent authentication
# Generate a random 32+ character string:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# IMPORTANT: Change this in production!
JWT_SECRET=your-random-secret-key-here-min-32-chars

# JWT expiration
# Examples: 1h, 7d, 30d
# Recommended: 7d for agent sessions
JWT_EXPIRES_IN=7d

# Default admin credentials
# IMPORTANT: Change these immediately after first login!
ADMIN_EMAIL=admin@myapp.com
ADMIN_PASSWORD=changeme123

# =============================================================================
# 9. OPTIONAL FEATURES
# =============================================================================

# Browser push notifications (optional)
# Generate VAPID keys: npm install -g web-push && web-push generate-vapid-keys
# Leave empty to disable push notifications
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=

# Webhook URL for external integrations (optional)
# POST requests sent on events: chat.started, chat.ended, message.received, etc.
# Leave empty to disable webhooks
WEBHOOK_URL=
